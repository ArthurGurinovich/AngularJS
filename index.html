<!DOCTYPE html>
<html lang="en">
    <head>
        <title>AngularJS | Course</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="./img/favicon.ico" type="image/x-icon">
        <link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon">
        <script src="./js/base/angular.min.1.5.js"></script>
        <link rel="stylesheet" type="text/css" href="./css/style.css">
    </head>
    <body>
        <header class="top-header">
            <div class="logo">
                <img src="./img/angular.svg"/>
            </div>
            <div class="title">AngularJS | Training</div>
        </header>
        <div id="content">
            <div class="lesson">
                <div class="title">Lesson 4</div>
                <div class="description">
                    <div ng-app="myApp">
                        <div ng-controller="myController">
                            <div class="login_form" ng-if="loginForm.state">
                                <p>{{ loginForm.title }}</p>
                                <input type="text" name="username" value="" ng-model="loginForm.username" placeholder="{{ loginForm.title }}">
                                <input type="button" name="start" value="Start chat" ng-click="startChat(loginForm.username)">
                            </div>
                            <div class="chat" ng-if="!loginForm.state">
                                <chat title="{{ loginForm.timeline }}"></chat>
                                <form-chat username="{{ loginForm.username }}"></form-chat>
                            </div>
                        </div>
                    </div>
                <script>
                    var app = angular.module("myApp", []);

                    app.controller("myController", ['$scope', function($scope) {

                        $scope.loginForm = {
                            title: 'Введите ваше имя для начала общения',
                            state: true,
                            timeline: 'Прямой эфир'
                        };
                        $scope.startChat = function(name){
                            $scope.loginForm.state = false;
                            console.log(name);
                        };
                    }]);
                    app.directive('chat', function(){
                        return {
                            scope: {
                                title: '@'
                            },
                            controller: function($scope, $element, $attrs) {

                            },
                            //require: 'ngModel',
                            restrict: 'E',
                            template: '<div class="chat_title"><div class="chat_rec"></div>{{ title }}</div>',
                            replace: true,
                            transclude: true,
                            link: function($scope, elem, attrs, controller) {
                                
                            }
                        };
                    });
                    app.directive('formСhat', function(){
                        return {
                            scope: {
                                username: '@'
                            },
                            controller: function($scope, $element, $attrs) {

                            },
                            //require: 'ngModel',
                            restrict: 'E',
                            template: '<div class="chat_title">{{ username }}</div>',
                            replace: true,
                            transclude: true,
                            link: function($scope, elem, attrs, controller) {
                                
                            }
                        };
                    });
                    
                </script>
                 </div>   
            </div>
     </div>       
    </body>
</html>