<!DOCTYPE html>
<html lang="en">
    <head>
        <title>AngularJS | Course</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="./img/favicon.ico" type="image/x-icon">
        <link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon">
        <script src="./js/base/angular.min.1.5.js"></script>
        <link rel="stylesheet" type="text/css" href="./css/style.css">
    </head>
    <body>
        <header class="top-header">
            <div class="logo">
                <img src="./img/angular.svg"/>
            </div>
            <div class="title">AngularJS | Training</div>
        </header>
        <div id="content">
            <div class="lesson">
                <div class="title">Lesson 3</div>
                <div class="description" ng-app="myApp">
                    <div ng-controller="myCtrl">
                        <tab-controls name="tabsName">
                            <ul class="navbar">
                            <pane title="pane1" on-pane-activated="onFirstPaneActivated(pane)">
                                <li><a href="#" ng-click="openTab('Tab1')">Tab1</a></li>

                                <div id="Tab1" class="pane">
                                  <h2>Loading...</h2>
                                </div>
                            </pane>
                            <pane  title="pane2" on-pane-activated="onSecondPaneActivated(pane)">
                                <li><a href="#" ng-click="openTab('Tab2')">Tab2</a></li>

                                <div id="Tab2" class="pane" style="display:none">
                                  <h2>Loading...</h2>
                                </div>
                            </pane>
                            <pane  title="pane3" on-pane-activated="onThirdPaneActivated(pane)">
                                <li><a href="#" ng-click="openTab('Tab3')">Tab3</a></li>

                                <div id="Tab3" class="pane" style="display:none">
                                  <h2>Loading...</h2>
                                </div>
                            </pane>
                            </ul>
                        </tab-controls>
                    </div>
                </div>

                    <script>
                        var app = angular.module('myApp', []);
                        app.controller('myCtrl', function($scope, $timeout){
                            $scope.openTab =function(pane) {
                                var i;
                                var x = document.getElementsByClassName("pane");
                                for (i = 0; i < x.length; i++) {
                                   x[i].style.display = "none";  
                                }
                                document.getElementById(pane).style.display = "block";  
                            };



                            $scope.tabsName = 'Tabs area';
                            $scope.pane1 = {
                                title: 'Pane 1',
                                description: 'Info for Pane 1'
                            };
                            $scope.pane2 = {
                                title: 'Pane 2',
                                description: 'Info for Pane 2'
                            };
                            $scope.pane3 = {
                                title: 'Pane 3',
                                description: 'Info for Pane 3'
                            };
                            $scope.countUp
                            $scope.onFirstPaneActivated = function(pane){
                                $timeout(countUp, 500);
                            };
                            $scope.onSecondPaneActivated = function(pane){
                                $timeout(countUp, 500);
                            };
                            $scope.onThirdPaneActivated = function(pane){
                                $timeout(countUp, 500);
                            };
                        });
                        app.directive('tabControls',function(){
                          return {
                            restrict: 'E',
                            controller: 'myCtrl',
                            scope: {
                                tabsArea: '@name'
                            },
                            template: '<ng-transclude></ng-transclude>',
                            transclude:  true,                          
                            link: function(scope, el, attr, ctrl){
                                console.log(ctrl);
                            }
                          }
                        });
                        app.directive('pane',function(){
                          return {
                            restrict: 'E',
                            require: '^tabControls',
                            scope: {
                              pane: '@title',
                              activeHandler: '&onPaneActivated'
                            },
                            template: '<ng-transclude></ng-transclude>',
                            transclude:  true,                          
                            link: function(scope, el, attr, ctrl){
                                console.log(scope);
                                console.log(scope.pane);

                            }
                          }
                        });

                    </script>
                 </div>   
            </div>
     </div>       
    </body>
</html>